---
sidebar_position: 9
---

# Lastmanagement

:::warning Experimentell
Lastmanagement befindet sich gerade noch in der Erprobungsphase.
:::

Lastmanagement ermöglicht es, die Leistung von Ladestationen zu steuern, um die Gesamtlast zu begrenzen.
Hierfür können Ladepunkte in Gruppen zusammengefasst werden.
Für jede Gruppe (`circuit`) kann eine maximale Stromstärke (`maxCurrent`) und/oder Leistung (`maxPower`) konfiguriert werden.
Das System arbeitet hierarchisch, d.h. Gruppen können Teil einer übergeordneten Gruppe sein.

## Konfiguration

Die Konfiguration erfolgt über die `evcc.yaml`.
Im Abschnitt `circuits` werden die Gruppen definiert.
Jeder Ladepunkt kann dann einer Gruppe zugeordnet werden.

### Beispiel: Globale Begrenzung

```yaml
circuits:
  - name: main # eindeutiger Name, wird als Referenz für andere Circuits verwendet
    title: Hauptsicherung # Anzeige in der UI (später)
    maxCurrent: 63 # 63A (optional)
    maxPower: 30000 # 30kW (optional)
    meter: grid # optional

loadpoints:
  - title: Garage
    circuit: main
    # ...
  - title: Carport
    circuit: main
    # ...
```

Hier wird eine Gruppe `main` definiert, die eine maximale Leistung von 30kW und eine maximale Phasen-Stromstärke von 63A hat.
Die Ladepunkte **Garage** und **Carport** sind dieser Gruppe zugeordnet.
Sollte an beiden Ladepunkten gleichzeitig ein 22kW Ladevorgang angefordert werden, drosselt die Regelung die Leistung auf jeweils 15kW, um das 30kW Limit (`maxPower`) nicht zu überschreiten.


### Beispiel: Verschachtelte Gruppen

```yaml
circuits:
  - name: main
    title: Hauptsicherung
    maxCurrent: 48
  - name: garage
    title: Garage
    maxCurrent: 32
    parent: main
  - name: carport
    title: Carport
    maxCurrent: 32
    parent: main

loadpoints:
  - title: Garage A
    circuit: garage
  - title: Garage B
    circuit: garage
  - title: Garage C
    circuit: garage
  - title: Carport A
    circuit: carport
  - title: Carport B
    circuit: carport
```

Hier haben wir zwei Gruppen `garage` und `carport`, die beide der Gruppe `main` untergeordnet (`parent: main`) sind.
Die Gruppe `main` hat eine maximale Stromstärke von 48A.
Die Gruppen `garage` und `carport` haben jeweils eine maximale Stromstärke von 32A.
Die Ladepunkte **Garage A**, **Garage B** und **Garage C** sind der Gruppe `garage` zugeordnet (`circuit: garage`).
Die Ladepunkte **Carport A** und **Carport B** sind der Gruppe `carport` zugeordnet (`circuit: carport`).
Die Regelung stellt sicher, dass zu keinem Zeitpunkt die Grenzen der Gruppen überschritten werden.

**Wichtig:** Es muss immer genau eine Gruppe (`circuit`) ohne `parent` definiert sein.

## Messwerte

Standardmäßig bildet die Steuerung die aktuelle Leistung und Stromstärke aus der Summe der jeweiligen Ladepunkte.
Über die Konfiguration eines Zählers (`meter`) am `circuit` kann hier auch die real anliegende Last berücksichtigt werden.
Dies ist insbesondere sinnvoll, wenn an der Sicherung auch noch weitere Verbraucher angeschlossen sind.

```yaml
meters:
  - name: carport_meter
    type: template
    template: shelly-3em

circuits:
  - name: carport
    meter: carport_meter
    maxCurrent: 32
```

## Grenzwerte

An jeder Gruppe kann sowohl eine maximale Stromstärke pro Phase (`maxCurrent`) als auch eine maximale Leistung (`maxPower`) konfiguriert werden.
Diese Werte werden, sofern konfiguriert, unabhängig voneinander überwacht.

## Einschränkungen

:::info
Für die kommerzielle Nutzung von Lastmanagement wird später eine separate Lizenz erforderlich sein.
Private Nutzung mit kleineren Installationen wird weiterhin kostenlos bleiben.
:::

- noch keine Statusinformationen und Begrenzungshinweise in der UI
- `priority` Einstellungen am Ladepunkt werden noch nicht berücksichtigt
- Lastmanagementregelung werden noch nicht vom Planungsalgorithmus berücksichtigt