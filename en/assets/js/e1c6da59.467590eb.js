"use strict";(self.webpackChunkevcc_docs=self.webpackChunkevcc_docs||[]).push([[821],{40527:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>a});var o=n(74848),s=n(28453);const t={sidebar_position:17},i="modbusproxy",c={id:"reference/configuration/modbusproxy",title:"modbusproxy",description:"The modbusproxy setting is a list of devices that are exposed for third-party systems via Modbus TCP on the network.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/reference/configuration/modbusproxy.md",sourceDirName:"reference/configuration",slug:"/reference/configuration/modbusproxy",permalink:"/en/docs/reference/configuration/modbusproxy",draft:!1,unlisted:!1,editUrl:"https://github.com/evcc-io/docs/tree/main/i18n/en/docusaurus-plugin-content-docs/current/reference/configuration/modbusproxy.md",tags:[],version:"current",sidebarPosition:17,frontMatter:{sidebar_position:17},sidebar:"tutorialSidebar",previous:{title:"telemetry",permalink:"/en/docs/reference/configuration/telemetry"},next:{title:"Plugins",permalink:"/en/docs/reference/plugins"}},d={},a=[{value:"Required Parameters",id:"required-parameters",level:2},{value:"<code>port</code>",id:"port",level:3},{value:"Optional Parameters",id:"optional-parameters",level:2},{value:"<code>uri</code>",id:"uri",level:3},{value:"<code>rtu</code>",id:"rtu",level:3},{value:"<code>readonly</code>",id:"readonly",level:3}];function l(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h1,{id:"modbusproxy",children:(0,o.jsx)(r.code,{children:"modbusproxy"})}),"\n",(0,o.jsxs)(r.p,{children:["The ",(0,o.jsx)(r.code,{children:"modbusproxy"})," setting is a list of devices that are exposed for third-party systems via Modbus TCP on the network."]}),"\n",(0,o.jsxs)(r.p,{children:["Some devices allow only a very limited number of Modbus TCP clients. In the worst case, only a single connection is allowed, as is the case with SolarEdge components. Additionally, in serial Modbus RTU RS485 bus systems, only one master is allowed.\nWith the help of ",(0,o.jsx)(r.code,{children:"modbusproxy"}),", it's possible to set up evcc as a Modbus proxy that can share existing Modbus connections with other systems. This allows evcc to communicate directly with the device, while other systems communicate with evcc, which bundles the communication connections and forwards them to the target device."]}),"\n",(0,o.jsxs)(r.p,{children:["The ",(0,o.jsx)(r.code,{children:"modbusproxy"})," configuration is a list of different proxy configurations."]}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:'modbusproxy:\n  - port: 5021\n    uri: 192.0.2.2:502\n  - port: 5022\n    device: /dev/ttyUSB0\n    baudrate: 9600\n    comset: "8N1"\n  - port: 5023\n    uri: 192.0.2.3:502\n    rtu: true\n'})}),"\n",(0,o.jsxs)(r.admonition,{type:"info",children:[(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.em,{children:"Incoming"})," (from third-party systems such as home automation, loggers), the proxy function exclusively supports Modbus TCP."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.em,{children:"Outgoing"})," towards the target device to be queried (e.g., inverter, energy meter), the protocol may be translated according to the target device's configuration."]})]}),"\n",(0,o.jsx)(r.admonition,{title:"Sponsortoken required",type:"tip",children:(0,o.jsxs)(r.p,{children:["For more information about evcc sponsorship, please visit ",(0,o.jsx)(r.a,{href:"../../sponsorship",children:"the sponsorship page"}),"."]})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"required-parameters",children:"Required Parameters"}),"\n",(0,o.jsx)(r.h3,{id:"port",children:(0,o.jsx)(r.code,{children:"port"})}),"\n",(0,o.jsx)(r.p,{children:"The local TCP/IP port under which a connection is provided as a proxy server, and from which incoming Modbus TCP connections from third-party systems are accepted."}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"port: 5021\n"})}),"\n",(0,o.jsx)(r.h2,{id:"optional-parameters",children:"Optional Parameters"}),"\n",(0,o.jsx)(r.h3,{id:"uri",children:(0,o.jsx)(r.code,{children:"uri"})}),"\n",(0,o.jsx)(r.p,{children:"The IP address and the port of the target device in common URI Scheme."}),"\n",(0,o.jsx)(r.p,{children:"Every provided port must be unique and not already in use by another application on the same host, however, it must not be different from the port of the target device. Therefore it is valid to define a configuration for port 502, which refers to port 502 on the target device."}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"- port: 502\n  uri: 192.0.2.2:502\n"})}),"\n",(0,o.jsx)(r.h3,{id:"rtu",children:(0,o.jsx)(r.code,{children:"rtu"})}),"\n",(0,o.jsxs)(r.p,{children:["Modbus TCP is typically used for communication with network targets. If needed, you can switch to Modbus RTU over TCP by specifying ",(0,o.jsx)(r.code,{children:"rtu: true"}),". A typical use case is for simple transparent RS485-TCP converters (without protocol translation). This must match the device's configuration. It's ignored for serial target systems."]}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"rtu: true\n"})}),"\n",(0,o.jsx)(r.h3,{id:"readonly",children:(0,o.jsx)(r.code,{children:"readonly"})}),"\n",(0,o.jsx)(r.p,{children:"By setting this parameter, you can prevent Modbus write accesses by third-party systems."}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Possible values"}),":"]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"true"}),": Write access is blocked without response"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"deny"}),": Write access is blocked with a modbus error as response"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"false"}),": Write access is forwarded"]}),"\n"]}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"readonly: true\n"})})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>c});var o=n(96540);const s={},t=o.createContext(s);function i(e){const r=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(t.Provider,{value:r},e.children)}}}]);