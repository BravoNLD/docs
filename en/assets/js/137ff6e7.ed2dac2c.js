"use strict";(self.webpackChunkevcc_docs=self.webpackChunkevcc_docs||[]).push([[628],{6394:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>l});var i=r(74848),s=r(28453);const d={sidebar_position:7},c="hems",t={id:"reference/configuration/hems",title:"hems",description:"evcc can be integrated into existing Home Energy Management Systems (HEMS). Currently, the SMA Sunny Home Manager 2.0 (SHM) is supported!",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/reference/configuration/hems.md",sourceDirName:"reference/configuration",slug:"/reference/configuration/hems",permalink:"/en/docs/reference/configuration/hems",draft:!1,unlisted:!1,editUrl:"https://github.com/evcc-io/docs/tree/main/i18n/en/docusaurus-plugin-content-docs/current/reference/configuration/hems.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"vehicles",permalink:"/en/docs/reference/configuration/vehicles"},next:{title:"network",permalink:"/en/docs/reference/configuration/uri"}},o={},l=[{value:"Required Parameters",id:"required-parameters",level:2},{value:"<code>type</code>",id:"type",level:3},{value:"Optional Parameters",id:"optional-parameters",level:2},{value:"<code>allowcontrol</code>",id:"allowcontrol",level:3},{value:"Optional SMA Parameters",id:"optional-sma-parameters",level:2},{value:"<code>vendorid</code>",id:"vendorid",level:3},{value:"<code>deviceid</code>",id:"deviceid",level:3},{value:"Determine Previous DeviceID",id:"determine-previous-deviceid",level:4},{value:"HEMS Supported",id:"hems-supported",level:2},{value:"<code>sma</code>",id:"sma",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"hems",children:(0,i.jsx)(n.code,{children:"hems"})}),"\n",(0,i.jsx)(n.p,{children:"evcc can be integrated into existing Home Energy Management Systems (HEMS). Currently, the SMA Sunny Home Manager 2.0 (SHM) is supported!"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  ...\n"})}),"\n",(0,i.jsx)(n.p,{children:"Below, the various parameters are explained."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"required-parameters",children:"Required Parameters"}),"\n",(0,i.jsx)(n.h3,{id:"type",children:(0,i.jsx)(n.code,{children:"type"})}),"\n",(0,i.jsx)(n.p,{children:"Defines the HEMS system."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Possible Values"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sma"}),": For the SMA Sunny Home Manager 2.0. See ",(0,i.jsx)(n.a,{href:"#sma",children:(0,i.jsx)(n.code,{children:"sma"})})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"type: sma\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"optional-parameters",children:"Optional Parameters"}),"\n",(0,i.jsx)(n.h3,{id:"allowcontrol",children:(0,i.jsx)(n.code,{children:"allowcontrol"})}),"\n",(0,i.jsx)(n.p,{children:"Defines whether the HEMS defined should take over the charging control of evcc."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Possible Values"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"true"}),": This allows adjusting the ratio of grid power to PV power for the ",(0,i.jsx)(n.strong,{children:"Min+PV"}),' mode in the Sunny Portal using the "Optional energy demand" slider. If the required PV power is not available, charging will be interrupted as in the ',(0,i.jsx)(n.strong,{children:"PV"})," mode. Sliding the slider all the way to the left makes the ",(0,i.jsx)(n.strong,{children:"Min+PV"})," mode work as described. Sliding the slider all the way to the right makes the ",(0,i.jsx)(n.strong,{children:"Min+PV"})," mode behave like the ",(0,i.jsx)(n.strong,{children:"PV"})," mode."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"false"}),": The SHM cannot influence the charging modes; they are controlled only by evcc."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  allowcontrol: false\n  ...\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"optional-sma-parameters",children:"Optional SMA Parameters"}),"\n",(0,i.jsx)(n.p,{children:"evcc registers each charging point with the SHM as an independent device. The device ID is generated by evcc."}),"\n",(0,i.jsx)(n.p,{children:"The device ID is a HEX string and is composed as follows"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"F-AAAAAAAA-BBBBBBBBBBBB-00\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"F: Vendor ID Type, predefined"}),"\n",(0,i.jsxs)(n.li,{children:["AAAAAAAA: See ",(0,i.jsx)(n.code,{children:"vendorid"})]}),"\n",(0,i.jsxs)(n.li,{children:["BBBBBBBBBBBB: See ",(0,i.jsx)(n.code,{children:"deviceid"})]}),"\n",(0,i.jsx)(n.li,{children:"00: Sub Device ID, predefined"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"vendorid",children:(0,i.jsx)(n.code,{children:"vendorid"})}),"\n",(0,i.jsx)(n.p,{children:"Defines the VendorID used for generating the Device ID. If no Vendor ID is specified in the configuration, a predefined ID is used."}),"\n",(0,i.jsx)(n.p,{children:"HEX string, length 8 characters"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  vendorid: AAAAAAAA\n  ...\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"deviceid",children:(0,i.jsx)(n.code,{children:"deviceid"})}),"\n",(0,i.jsx)(n.p,{children:"Defines the device ID used for generating the Device ID. If no device ID is specified, evcc generates a random device ID depending on the current computer."}),"\n",(0,i.jsx)(n.p,{children:"HEX string, length: 12 characters"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  deviceid: BBBBBBBBBBBB\n  ...\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Docker Container",type:"info",children:(0,i.jsxs)(n.p,{children:["If evcc is running as a Docker container, ",(0,i.jsx)(n.code,{children:"machine-id"})," must be mounted. See also ",(0,i.jsx)(n.a,{href:"../../installation/docker",children:"Docker Configuration"})]})}),"\n",(0,i.jsx)(n.h4,{id:"determine-previous-deviceid",children:"Determine Previous DeviceID"}),"\n",(0,i.jsx)(n.p,{children:"If evcc is moved to another computer, the randomly generated device ID also changes. In this case, the SHM recognizes evcc as a new device, and the previous devices are not recognized in the SMA Portal."}),"\n",(0,i.jsx)(n.p,{children:"To prevent this, the device ID from the previous system should be adopted:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open the address ",(0,i.jsx)(n.code,{children:"http://PREVIOUS-EVCC-HOST-IP-ADDRESS:7070/semp"})," in a browser."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"XML-formatted text will be displayed. The text starts in this form:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<Device2EM xmlns="http://www.sma.de/communication/schema/SEMP/v1">\n  <DeviceInfo>\n    <Identification>\n      <DeviceId>F-28081973-BBBBBBBBBBBB-00</DeviceId>\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The string at the location of ",(0,i.jsx)(n.code,{children:"BBBBBBBBBBBB"})," corresponds to the DeviceID."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["This string must now be used in the configuration for ",(0,i.jsx)(n.code,{children:"deviceid"})," in the new system."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"hems-supported",children:"HEMS Supported"}),"\n",(0,i.jsx)(n.h3,{id:"sma",children:(0,i.jsx)(n.code,{children:"sma"})}),"\n",(0,i.jsx)(n.p,{children:"Provides support for the SMA Sunny Home Manager 2.0 (SHM)."}),"\n",(0,i.jsxs)(n.p,{children:["Through this integration, ",(0,i.jsx)(n.a,{href:"loadpoints",children:"chargers"})," can be added to the SHM and, for example, considered for its control."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  allowcontrol: false # set true to allow SHM controlling charger in PV modes\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>t});var i=r(96540);const s={},d=i.createContext(s);function c(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);