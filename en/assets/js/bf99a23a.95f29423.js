"use strict";(self.webpackChunkevcc_docs=self.webpackChunkevcc_docs||[]).push([[2380],{20617:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>h,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>d,toc:()=>u});var n=i(85893),t=i(11151);const s=i.p+"assets/images/prioritysoc-5e12ff2baefee6c49d7e8a6088a3ce1c.webp",a=i.p+"assets/images/buffersoc-220fabbb55f28789a16e1d98516748c5.webp",o=i.p+"assets/images/bufferstartsoc-20da1606f6dc57fe6e8e591edfe88f90.webp",l={sidebar_position:2},c="site",d={id:"reference/configuration/site",title:"site",description:"Describes the location with the existing and required devices of the home installation and is responsible for regulating the available power.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/reference/configuration/site.mdx",sourceDirName:"reference/configuration",slug:"/reference/configuration/site",permalink:"/en/docs/reference/configuration/site",draft:!1,unlisted:!1,editUrl:"https://github.com/evcc-io/docs/tree/main/i18n/en/docusaurus-plugin-content-docs/current/reference/configuration/site.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"evcc.yaml",permalink:"/en/docs/reference/configuration/"},next:{title:"loadpoints",permalink:"/en/docs/reference/configuration/loadpoints"}},h={},u=[{value:"Required Parameters",id:"required-parameters",level:2},{value:"<code>title</code>",id:"title",level:3},{value:"<code>meters</code>",id:"meters",level:3},{value:"Optional Parameters",id:"optional-parameters",level:2},{value:"<code>meters.grid</code>",id:"metersgrid",level:3},{value:"<code>meters.pv</code>",id:"meterspv",level:3},{value:"<code>meters.battery</code>",id:"metersbattery",level:3},{value:"<code>meters.aux</code>",id:"metersaux",level:3},{value:"<code>prioritySoc</code>",id:"prioritysoc",level:3},{value:"<code>bufferSoc</code>",id:"buffersoc",level:3},{value:"<code>bufferStartSoc</code>",id:"bufferstartsoc",level:3},{value:"<code>residualPower</code>",id:"residualpower",level:3},{value:"<code>grid</code> <code>meter</code> present",id:"grid-meter-present",level:4},{value:"Only <code>pv</code> <code>meter</code> present",id:"only-pv-meter-present",level:4},{value:"<code>maxGridSupplyWhileBatteryCharging</code>",id:"maxgridsupplywhilebatterycharging",level:3}];function p(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"site",children:(0,n.jsx)(r.code,{children:"site"})}),"\n",(0,n.jsx)(r.p,{children:"Describes the location with the existing and required devices of the home installation and is responsible for regulating the available power."}),"\n",(0,n.jsx)(r.p,{children:"To regulate charging with PV surplus, a readable meter directly behind the grid connection point is necessary. In addition, devices for PV power and house battery(ies) can also be specified. Several devices are automatically added in terms of power or, in the case of battery storage, the average state of charge is calculated."}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"site:\n  - title: Home # display name for UI\n    meters:\n      grid: mygridmeter # grid meter reference\n      pv: # (pvs = deprecated)\n        - mypv1 # first pv meter reference\n        - mypv9 # second pv meter reference\n      battery: # (batteries = deprecated)\n        - mybat5 # battery meter reference\n      aux:\n        - myaux1\n    residualPower: 100\n    bufferSoc: 80\n    prioritySoc: 66\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"required-parameters",children:"Required Parameters"}),"\n",(0,n.jsx)(r.h3,{id:"title",children:(0,n.jsx)(r.code,{children:"title"})}),"\n",(0,n.jsx)(r.p,{children:"The description of the charging point is also displayed in the UI."}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"title: Home\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"meters",children:(0,n.jsx)(r.code,{children:"meters"})}),"\n",(0,n.jsx)(r.p,{children:"Defines which configured meter (current measurement devices) are to be used as what type of measurement point. This logically links the device definition with its intended use. A initially universal meter is thus assigned a purpose based on its location within the home installation."}),"\n",(0,n.jsx)(r.admonition,{type:"note",children:(0,n.jsxs)(r.p,{children:["At least the configuration of one ",(0,n.jsx)(r.code,{children:"grid"})," or at least one ",(0,n.jsx)(r.code,{children:"pv"})," element is necessary!\nevcc cannot be used without at least one of these entries!"]})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"site:\n  meters:\n    grid: mygridmeter # grid meter reference\n    pv: mypv1 # pv meter reference\n    battery: mybat2 # battery meter reference\n    aux: myaux1\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"optional-parameters",children:"Optional Parameters"}),"\n",(0,n.jsx)(r.h3,{id:"metersgrid",children:(0,n.jsx)(r.code,{children:"meters.grid"})}),"\n",(0,n.jsxs)(r.p,{children:["Defines the ",(0,n.jsx)(r.a,{href:"meters",children:(0,n.jsx)(r.code,{children:"meter"})})," (current measurement device) that provides the measurements of the grid connection point."]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Possible values"}),": Value of a ",(0,n.jsx)(r.code,{children:"name"})," parameter in the ",(0,n.jsx)(r.a,{href:"#meters",children:(0,n.jsx)(r.code,{children:"meters"})})," configuration."]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"grid: mygridmeter # grid meter reference\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"meterspv",children:(0,n.jsx)(r.code,{children:"meters.pv"})}),"\n",(0,n.jsxs)(r.p,{children:["Defines ",(0,n.jsx)(r.a,{href:"meters",children:(0,n.jsx)(r.code,{children:"meter"})})," (current measurement devices), from which evcc fetches PV generation measurements.\nMultiple devices can be specified. Power data is automatically added."]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Possible values"}),": A single value or a list of values of a name parameter in the ",(0,n.jsx)(r.a,{href:"#meters",children:(0,n.jsx)(r.code,{children:"meters"})})," configuration. The list version can also be used with single values."]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"pv: myonlypv # single pv meter reference\n"})}),"\n",(0,n.jsx)(r.p,{children:"or"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"pv: # (pvs = deprecated)\n  - myoldpv # first pv meter reference\n  - mynewestpv # second pv meter reference\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"metersbattery",children:(0,n.jsx)(r.code,{children:"meters.battery"})}),"\n",(0,n.jsxs)(r.p,{children:["Defines the ",(0,n.jsx)(r.a,{href:"meters",children:(0,n.jsx)(r.code,{children:"meter"})})," (current measurement devices) that provide measurement data from the battery(ies).\nMultiple devices can be specified. Power data is automatically added, and an average is calculated from the battery state of charge."]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Possible values"}),": A single value or a list of values of a ",(0,n.jsx)(r.code,{children:"name"})," parameter in the ",(0,n.jsx)(r.a,{href:"#meters",children:(0,n.jsx)(r.code,{children:"meters"})})," configuration. The list version can also be used with single values."]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"battery: myonlybat # single battery meter reference\n"})}),"\n",(0,n.jsx)(r.p,{children:"or"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"battery: # (batteries = deprecated)\n  - mysmallbat # first battery meter reference\n  - myhugebat # second battery meter reference\n"})}),"\n",(0,n.jsx)(r.h3,{id:"metersaux",children:(0,n.jsx)(r.code,{children:"meters.aux"})}),"\n",(0,n.jsx)(r.p,{children:"Defines the meters (current measurement devices) that provide measurement data from external devices that have their own surplus control but are not directly controlled by evcc. Multiple devices can be specified. Power data is automatically added."}),"\n",(0,n.jsx)(r.p,{children:"In evcc, this power contributes to the calculation of the available surplus power for vehicle charging. It is assumed that devices measured using auxiliary meters will autonomously and promptly reduce or completely interrupt their power consumption when the measured auxiliary power is allocated to vehicle charging by evcc."}),"\n",(0,n.jsx)(r.p,{children:"Positive value: additional available surplus power (allocated to vehicle charging)"}),"\n",(0,n.jsx)(r.p,{children:"Negative value: insufficient surplus power (not available for vehicle charging)"}),"\n",(0,n.jsx)(r.p,{children:"Examples:"}),"\n",(0,n.jsx)(r.p,{children:"An immersion heater for hot water production that is autonomously regulated based on PV surplus at the grid connection point. When the power consumption of this immersion heater is measured and configured as an aux meter, the entire surplus power (power of the immersion heater plus any remaining grid feed-in) is always preferentially allocated to vehicle charging. If the vehicle charging accesses it, the autonomous regulation of the immersion heater ensures that its power is reduced accordingly."}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Possible values"}),": A single value or a list of values of a ",(0,n.jsx)(r.code,{children:"name"})," parameter in the ",(0,n.jsx)(r.a,{href:"#meters",children:(0,n.jsx)(r.code,{children:"meters"})})," configuration. The list version can also be used with single values."]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"aux: myaux # single aux meter reference\n"})}),"\n",(0,n.jsx)(r.p,{children:"or"}),"\n",(0,n.jsx)(r.p,{children:"yaml"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"aux:\n  - myaux1 # first aux meter reference\n  - myaux2 # second aux meter reference\n"})}),"\n",(0,n.jsx)(r.h3,{id:"prioritysoc",children:(0,n.jsx)(r.code,{children:"prioritySoc"})}),"\n",(0,n.jsx)(r.admonition,{title:"deprecated in yaml",type:"note",children:(0,n.jsx)(r.p,{children:"This value can and should be configured via the battery settings dialog in the UI."})}),"\n",(0,n.jsx)("img",{src:s,style:{maxWidth:400}}),"\n",(0,n.jsx)(r.p,{children:"Charging the house battery is prioritized over vehicle charging below the specified state of charge (SoC) (%) value. If there is more generation capacity available below this value than the battery can absorb, this surplus can still be used for vehicle charging, but as a lower priority. When the house battery is charged above this value, the battery charging power is considered as available surplus power for vehicle charging. Thus, vehicle charging takes priority in using the surplus power when it is above this SoC value.\nIt is disabled (equivalent to 0%) if no value is provided."}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"prioritySoc: 50 # House battery has priority for charging up to 50% SoC\n"})}),"\n",(0,n.jsx)(r.h3,{id:"buffersoc",children:(0,n.jsx)(r.code,{children:"bufferSoc"})}),"\n",(0,n.jsx)(r.admonition,{title:"deprecated in yaml",type:"note",children:(0,n.jsx)(r.p,{children:"This value can and should be configured via the battery settings dialog in the UI."})}),"\n",(0,n.jsx)("img",{src:a,style:{maxWidth:400}}),"\n",(0,n.jsx)(r.p,{children:"Allows the discharging of a house battery above the specified state of charge (SoC) (%) value when there is insufficient solar surplus (below the minimum charging power). This helps balance fluctuations in generation or consumption primarily using the house battery. If the discharge power of the house battery is not enough to provide the minimum charging power for the vehicle, the remainder will be sourced from the grid."}),"\n",(0,n.jsxs)(r.p,{children:["In ",(0,n.jsx)(r.code,{children:"PV"})," mode, a charging process is automatically initiated when enough solar surplus is available."]}),"\n",(0,n.jsx)(r.p,{children:"It is disabled (equivalent to >100%) if no value is provided."}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"bufferSoc: 80 # House battery is used as a buffer above 80% SoC\n"})}),"\n",(0,n.jsx)(r.h3,{id:"bufferstartsoc",children:(0,n.jsx)(r.code,{children:"bufferStartSoc"})}),"\n",(0,n.jsx)(r.admonition,{title:"deprecated in yaml",type:"note",children:(0,n.jsx)(r.p,{children:"This value can and should be configured via the battery settings dialog in the UI."})}),"\n",(0,n.jsx)("img",{src:o,style:{maxWidth:400}}),"\n",(0,n.jsxs)(r.p,{children:["In ",(0,n.jsx)(r.code,{children:"PV"})," mode, allows the start of a charging process above the specified state of charge (SoC) (%) value, even if there is insufficient solar surplus."]}),"\n",(0,n.jsx)(r.p,{children:"If the discharge power of the house battery is not enough to provide the minimum charging power for the vehicle, the remainder will be sourced from the grid."}),"\n",(0,n.jsx)(r.p,{children:"It is disabled (equivalent to 0%) if no value is provided."}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"For example"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"bufferStartSoc: 90 # Charging process starts when the house battery reaches 90% SoC\n"})}),"\n",(0,n.jsx)(r.h3,{id:"residualpower",children:(0,n.jsx)(r.code,{children:"residualPower"})}),"\n",(0,n.jsx)(r.p,{children:'Sets the target operating point of the surplus regulation at the grid connection (grid meter). The default value is 0 W.\nPositive values shift the target value towards grid feed-in, while negative values shift it towards grid consumption.\nUltimately, this value sets the "idle state" of the control loop that needs to be adjusted by the controller.'}),"\n",(0,n.jsx)(r.p,{children:"Especially in combination with other independent surplus regulation systems like a battery storage, this value must be adjusted to achieve a defined system behaviour with clear priorities."}),"\n",(0,n.jsx)(r.p,{children:"If a certain proportion of grid consumption should remain or be allowed in PV mode, a negative value corresponding to the maximum proportion of grid consumption can be configured."}),"\n",(0,n.jsxs)(r.h4,{id:"grid-meter-present",children:[(0,n.jsx)(r.code,{children:"grid"})," ",(0,n.jsx)(r.code,{children:"meter"})," present"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Positive value: Remaining grid feed-in power"}),"\n",(0,n.jsx)(r.li,{children:"Negative value: Remaining grid consumption power"}),"\n"]}),"\n",(0,n.jsxs)(r.h4,{id:"only-pv-meter-present",children:["Only ",(0,n.jsx)(r.code,{children:"pv"})," ",(0,n.jsx)(r.code,{children:"meter"})," present"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Positive value: Typical household consumption, used to estimate PV surplus."}),"\n",(0,n.jsx)(r.li,{children:"Negative value: The specified power is added to PV power and increases available charging power (Attention: grid consumption)"}),"\n"]}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsxs)(r.p,{children:["When a battery storage is present, it is strongly recommended to enter a small value, e.g. between 100 to 300 W here, allowing battery charging according to configured priorities (see ",(0,n.jsx)(r.code,{children:"prioritySoc"}),"). Otherwise, the independent regulation of the storage will not see usable surplus. Likewise, this prevents temporary grid consumption even without a battery during rapid generation and load changes."]})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:'Example "Battery Storage"'}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"residualPower: 100\n"})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:'For example "Grid Consumption Proportion"'}),":"]}),"\n",(0,n.jsx)(r.p,{children:"Charging should start in PV mode with at least 6A (single-phase) even with only 50% PV surplus (rest from grid).\nMinimum charging power: 1 phase _ 6A _ 230V = 1380 W, 50% of it: 690 W"}),"\n",(0,n.jsxs)(r.p,{children:["See also the ",(0,n.jsx)(r.a,{href:"/docs/features/solar-charging",children:"alternative using enable/disable to allow proportional PV and grid consumption"}),"."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"residualPower: -690\n"})}),"\n",(0,n.jsx)(r.h3,{id:"maxgridsupplywhilebatterycharging",children:(0,n.jsx)(r.code,{children:"maxGridSupplyWhileBatteryCharging"})}),"\n",(0,n.jsx)(r.p,{children:"This parameter is only helpful for hybrid inverter systems where the DC power generated in combination with a directly connected storage system can be greater than the AC output power of the inverter. This can result in grid consumption during vehicle charging, even when the battery is being charged simultaneously."}),"\n",(0,n.jsx)(r.p,{children:"Scenario:\nMaximum 10 kW AC output power of the hybrid inverter. Current PV generation is 15 kW, with 5 kW going into the directly connected battery since the AC path of the hybrid inverter is fully utilized at 10 kW."}),"\n",(0,n.jsxs)(r.p,{children:["Normally, the current battery charging power is considered as additional available vehicle charging power (once ",(0,n.jsx)(r.code,{children:"prioritySoc"})," is reached). In the above example, grid consumption could occur equal to the current battery charging power since the inverter cannot provide this power to the grid (and thus the vehicle). The fully utilized AC path of the hybrid inverter creates an unexpected bottleneck for the standard regulation."]}),"\n",(0,n.jsx)(r.p,{children:"With this parameter, a threshold value for grid consumption can be set. If this threshold is reached, the battery charging power is not considered as available vehicle charging power in this scenario. This way, the maximum surplus charging power remains limited to the maximum AC output power of the inverter, plus this value."}),"\n",(0,n.jsx)(r.p,{children:"A recommended value is at least 50 Watts. Depending on the responsiveness of the control systems involved, it might need to be higher."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"maxGridSupplyWhileBatteryCharging: 50\n"})})]})}function m(e={}){const{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},11151:(e,r,i)=>{i.d(r,{Z:()=>o,a:()=>a});var n=i(67294);const t={},s=n.createContext(t);function a(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);