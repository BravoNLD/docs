"use strict";(self.webpackChunkevcc_docs=self.webpackChunkevcc_docs||[]).push([[7730],{9307:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>u});var t=i(74848),r=i(28453);const s={title:"v0.124 - Neue Tesla Integration",authors:["naltatis"],tags:["release"],hide_table_of_contents:!1},a=void 0,l={permalink:"/blog/2024/02/01/v0.124-new-tesla-api",editUrl:"https://github.com/evcc-io/docs/tree/main/blog/2024-02-01/v0.124-new-tesla-api.mdx",source:"@site/blog/2024-02-01/v0.124-new-tesla-api.mdx",title:"v0.124 - Neue Tesla Integration",description:"Banner mit \xdcbersicht neuer Funktionen",date:"2024-02-01T00:00:00.000Z",tags:[{label:"release",permalink:"/blog/tags/release"}],readingTime:4.74,hasTruncateMarker:!1,authors:[{name:"Michael Geers",title:"Core-Team, UI",url:"https://github.com/naltatis",imageURL:"https://github.com/naltatis.png",key:"naltatis"}],frontMatter:{title:"v0.124 - Neue Tesla Integration",authors:["naltatis"],tags:["release"],hide_table_of_contents:!1},unlisted:!1,nextItem:{title:"Feature Highlights 10/2023",permalink:"/blog/2023/10/05/feature-highlights-10-2023"}},d={authorsImageUrls:[void 0]},u=[{value:"Neue Tesla Integration",id:"neue-tesla-integration",level:2},{value:"Was bedeutet das f\xfcr mich?",id:"was-bedeutet-das-f\xfcr-mich",level:3},{value:"Privatsph\xe4re &amp; Sicherheit",id:"privatsph\xe4re--sicherheit",level:3},{value:"Kosten",id:"kosten",level:3},{value:"Aktive Batteriesteuerung",id:"aktive-batteriesteuerung",level:2},{value:"Passive Steuerung",id:"passive-steuerung",level:3},{value:"Entladesperre beim Schnellladen",id:"entladesperre-beim-schnellladen",level:3},{value:"N\xe4chster Schritt: Batterie mit g\xfcnstigem Netzstrom laden",id:"n\xe4chster-schritt-batterie-mit-g\xfcnstigem-netzstrom-laden",level:3},{value:"Update: Migration zur Browser-Konfiguration",id:"update-migration-zur-browser-konfiguration",level:2},{value:"Kleine Verbesserungen und Fehlerbehebungen",id:"kleine-verbesserungen-und-fehlerbehebungen",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Banner mit \xdcbersicht neuer Funktionen",src:i(30926).A+"",width:"2000",height:"1000"})}),"\n",(0,t.jsx)(n.p,{children:"Die Tage werden l\xe4nger und PV-\xdcberschussladen beginnt wieder Spa\xdf zu machen.\nEin guter Zeitpunkt f\xfcr ein kurzes Update \xfcber die neuesten Entwicklungen bei evcc."}),"\n",(0,t.jsx)(n.h2,{id:"neue-tesla-integration",children:"Neue Tesla Integration"}),"\n",(0,t.jsxs)(n.p,{children:["Im ",(0,t.jsx)(n.a,{href:"https://www.notateslaapp.com/news/1653/tesla-creates-official-apis-for-third-party-services-to-start-charging-for-usage",children:"Oktober"})," hat Tesla eine neue ",(0,t.jsx)(n.a,{href:"https://developer.tesla.com/docs/fleet-api",children:"offizielle API"})," vorgestellt.\nZudem wurde angek\xfcndigt, dass die alte, ",(0,t.jsx)(n.a,{href:"https://www.teslaapi.io",children:"inoffizielle API"})," Anfang 2024 abgeschaltet wird.\nIn der vergangenen Woche hat Tesla mit dieser Abschaltung St\xfcck f\xfcr St\xfcck begonnen."]}),"\n",(0,t.jsx)(n.h3,{id:"was-bedeutet-das-f\xfcr-mich",children:"Was bedeutet das f\xfcr mich?"}),"\n",(0,t.jsxs)(n.p,{children:["Um die neue API nutzen zu k\xf6nnen, musst du zwei Anpassungen in der ",(0,t.jsx)(n.code,{children:"evcc.yaml"})," vornehmen:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Neuer Template-Name:"})," Da die alte API f\xfcr einige Nutzer heute noch funktioniert, haben wir uns entschieden vorerst beide Implementierungen parallel anzubieten. \xc4ndere den Template-Namen von ",(0,t.jsx)(n.code,{children:"tesla"})," zu ",(0,t.jsx)(n.code,{children:"tesla-command"}),", um die neue API zu nutzen."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Neue Tokens erzeugen:"})," Mit der neuen API ist es nun m\xf6glich, die erforderlichen ",(0,t.jsx)(n.code,{children:"accessToken"})," und ",(0,t.jsx)(n.code,{children:"refreshToken"})," direkt im Browser zu erzeugen.\nDaf\xfcr haben wir unter ",(0,t.jsx)(n.a,{href:"https://tesla.evcc.io",children:"tesla.evcc.io"})," eine kleine Webseite bereitgestellt.\nErsetze die alten Tokens in der ",(0,t.jsx)(n.code,{children:"evcc.yaml"})," mit den neu erzeugten."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Die Konfiguration sollte dann wie folgt aussehen:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"vehicles:\n - name: mytesla\n   type: template\n   template: tesla-command # change `tesla` to `tesla-command`\n   accessToken: ... # generetad by tesla.evcc.io\n   refreshToken:  ... # generetad by tesla.evcc.io\n   ...\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Die \xfcber ",(0,t.jsx)(n.a,{href:"https://tesla.evcc.io",children:"tesla.evcc.io"})," erzeugten Token k\xf6nnen ",(0,t.jsx)(n.strong,{children:"nur mit den offiziellen evcc Builds"})," (stable & nightly) verwendet werden.\nGrund daf\xfcr ist, dass die Tokens aus Teslas neuer Developer API immer an eine 3rd-Party App gebunden sind."]}),"\n",(0,t.jsxs)(n.p,{children:["Du kannst dir evcc nat\xfcrlich auch weiterhin selbst bauen.\nDaf\xfcr ben\xf6tigst du aber einen eigenen Tesla Developer Account und musst die Tokens selbst erzeugen.\nMehr Details dazu findest du im entsprechenden ",(0,t.jsx)(n.a,{href:"https://github.com/evcc-io/evcc/pull/10802",children:"Pull Request"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"privatsph\xe4re--sicherheit",children:"Privatsph\xe4re & Sicherheit"}),"\n",(0,t.jsx)(n.p,{children:"Wie auch bei der alten API l\xe4uft die Kommunikation f\xfcr Datenabfrage (Ladestand, Zustand, ...) und Steuerung (Aufwecken) direkt zwischen deiner lokalen evcc Instanz und der Tesla-Infrastruktur ab.\nLediglich die Token-Erzeugung l\xe4uft einmalig \xfcber unsere Webseite.\nTokens werden dabei nicht gespeichert, sondern nur im Browser angezeigt."}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcr eine erweiterte Steuerung des Fahrzeuges (Ladevorgang direkt am Fahrzeug starten und stoppen) ist eine zus\xe4tzlich signierte Anfrage an Tesla erforderlich.\nDies betrifft heute konkret die Nutzer eines Tesla Wall Connectors.\nDa wir unseren privaten 3rd-Party-App-Schl\xfcssel nicht ins evcc Binary packen k\xf6nnen bzw. d\xfcrfen, werden wir f\xfcr diese Anwendung vermutlich einen ",(0,t.jsx)(n.a,{href:"https://github.com/evcc-io/evcc/pull/11893",children:"eigenen Service"})," bereitstellen, der diese Anfragen signiert und an Tesla weiterleitet.\nDazu aber mehr in einem sp\xe4teren Release."]}),"\n",(0,t.jsx)(n.h3,{id:"kosten",children:"Kosten"}),"\n",(0,t.jsxs)(n.p,{children:["Tesla bietet die neue API ",(0,t.jsx)(n.a,{href:"https://developer.tesla.com/docs/fleet-api#membership-tiers",children:"aktuell noch kostenlos an"}),".\nAllerdings haben sie bereits angek\xfcndigt, dass sie in Zukunft f\xfcr die Nutzung der API Geb\xfchren erheben werden.\nWie Open-Source-freundlich dieses Modell ausf\xe4llt, wissen wir bisher nicht."]}),"\n",(0,t.jsx)(n.p,{children:"Daher ist es durchaus m\xf6glich, dass wir die Token-Bereitstellung in Zukunft nicht mehr kostenlos anbieten k\xf6nnen.\nGgf. werden wir es mit dem existierenden evcc Sponsoring Modell verkn\xfcpfen.\nAber mehr dazu, wenn es neue Informationen von Tesla gibt."}),"\n",(0,t.jsx)(n.h2,{id:"aktive-batteriesteuerung",children:"Aktive Batteriesteuerung"}),"\n",(0,t.jsxs)(n.p,{children:["Ein gro\xdfes neues Feature, was mit dem Weihnachts-Release Einzug gehalten hat, ist die aktive Batteriesteuerung.\nDiese Funktion ist inzwischen nicht mehr als experimentell markiert.\nZudem sind in den vergangenen Wochen einige neue unterst\xfctzte Batterie-Wechselrichter hinzugekommen.\nIn der Dokumentation siehst du inzwischen auch, ",(0,t.jsx)(n.a,{href:"/docs/devices/meters#features",children:"ob dein Wechselrichter unterst\xfctzt wird"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"passive-steuerung",children:"Passive Steuerung"}),"\n",(0,t.jsxs)(n.p,{children:["Eine passive Batteriesteuerung bringt evcc schon seit einiger Zeit mit.\nHierbei regelt evcc das PV-\xdcberschussladen so, dass die Hausbatterie nicht ungewollt mit entladen wird.\nIm letzten Jahr haben wir einen ",(0,t.jsx)(n.a,{href:"/blog/2023/10/05/feature-highlights-10-2023#batterieeinstellungen",children:"Konfigurationsdialog"})," eingef\xfchrt, mit dem die Priorisierung zwischen Fahrzeug- und Hausbatterieladung eingestellt werden kann.\nDieses Modell funktioniert beim reinen \xdcberschussladen auch sehr gut.\nevcc kennt dabei lediglich den aktuellen Ladezustand der Hausbatterie und regelt nur die Ladeleistung des Fahrzeuges.\nDieser Mechanismus funktioniert allerdings nicht beim Schnellladen.\nHierf\xfcr ist eine aktive Batteriesteuerung erforderlich."]}),"\n",(0,t.jsx)(n.h3,{id:"entladesperre-beim-schnellladen",children:"Entladesperre beim Schnellladen"}),"\n",(0,t.jsxs)(n.p,{children:["Standardm\xe4\xdfig probiert die Hausbatterie den gesamten Energieverbrauch des Hauses (inkl. Ladestationen) zu decken.\nAbh\xe4ngig vom aktuellen Strompreis oder erwarteter PV-Erzeugung kann es aber w\xfcnschenswert sein, die Energie beim ",(0,t.jsx)(n.strong,{children:"schnellen Fahrzeugladen"})," direkt aus dem Netz und nicht aus der Hausbatterie zu beziehen.\nDamit bleibt die gesammelte Sonnenenergie in der Hausbatterie und kann bspw. nachts f\xfcr den Hausverbrauch genutzt werden."]}),"\n",(0,t.jsx)(n.p,{children:"Dies ist unser erster Anwendungsfall f\xfcr die aktive Batteriesteuerung.\nUnterst\xfctzt dein Wechselrichter dieses Feature, erscheint im Batterieeinstellungen Dialog eine entsprechende Option."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Batteriesteuerung: Verhindere Entladung im Schnell-Modus und bei geplantem Laden.",src:i(18174).A+"",width:"583",height:"706"})}),"\n",(0,t.jsxs)(n.p,{children:["Ist diese Option aktiv, wird die Hausbatterie beim Schnellladen in einen Sperrmodus versetzt.\nIn dieser Zeit wird er weder entladen noch geladen.\nDiese Sperre ist auch bei ",(0,t.jsx)(n.a,{href:"/blog/2023/10/05/feature-highlights-10-2023#visualisierung-ladeplanung",children:"geplantem Laden"})," und beim ",(0,t.jsx)(n.a,{href:"/blog/2023/10/05/feature-highlights-10-2023#smartes-netzladen",children:"smarten Netzladen"})," aktiv."]}),"\n",(0,t.jsx)(n.h3,{id:"n\xe4chster-schritt-batterie-mit-g\xfcnstigem-netzstrom-laden",children:"N\xe4chster Schritt: Batterie mit g\xfcnstigem Netzstrom laden"}),"\n",(0,t.jsx)(n.p,{children:"Die n\xe4chste Ausbaustufe f\xfcr die aktive Batteriesteuerung ist die M\xf6glichkeit, die Hausbatterie mit g\xfcnstigem Netzstrom zu laden.\nDas ist vor allem f\xfcr Nutzer von dynamischen Stromtarifen an dunkleren Tagen interessant.\nZiel ist es dabei, die Hausbatterie in Niedrigpreisphasen mit Energie aus dem Netz zu f\xfcllen und diese Energie dann in Hochpreisphasen zu nutzen.\nDie erforderlichen Hardwareintegrationen haben wir bereits umgesetzt.\nDaher rechnen wir damit, dass diese Funktion in einem der n\xe4chsten Releases verf\xfcgbar sein wird."}),"\n",(0,t.jsx)(n.h2,{id:"update-migration-zur-browser-konfiguration",children:"Update: Migration zur Browser-Konfiguration"}),"\n",(0,t.jsxs)(n.p,{children:["evcc ist ein sehr flexibles und m\xe4chtiges System f\xfcr die eigene Energieoptimierung.\nUnsere gr\xf6\xdfte Herausforderung ist es weiterhin, diese Flexibilit\xe4t mit einer einfachen Einrichtung zu vereinen.\nIn den letzten Monaten haben wir gro\xdfe Fortschritte im Bereich der Konfiguration gemacht.\nUnser Ziel ist es eine reine browserbasierte Inbetriebnahme, ohne ",(0,t.jsx)(n.code,{children:"evcc.yaml"}),", zu erm\xf6glichen."]}),"\n",(0,t.jsx)(n.p,{children:'Hast du im Einstellungsdialog die Option "Experimentelle UI-Funktionen zeigen" aktiviert, kannst du unter "\ud83e\uddea Device Configuration" unseren aktuellen Entwicklungsfortschritt sehen.\nAktuell k\xf6nnen dort Fahrzeuge, Netzz\xe4hler, PV- und Batteriesysteme hinzugef\xfcgt und bearbeitet werden.\nLadepunkte und Tarife folgen in der n\xe4chsten Iteration.\nAuch wenn das Ganze noch ein "Work in Progress" ist, freuen wir uns \xfcber dein Feedback.'}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Device configuration",src:i(6723).A+"",width:"985",height:"750"})}),"\n",(0,t.jsx)(n.h2,{id:"kleine-verbesserungen-und-fehlerbehebungen",children:"Kleine Verbesserungen und Fehlerbehebungen"}),"\n",(0,t.jsxs)(n.p,{children:["Wie immer enth\xe4lt dieses Release auch eine Reihe kleinerer Verbesserungen und Fehlerbehebungen.\nF\xfcr mehr Details schau dir die ",(0,t.jsx)(n.a,{href:"https://github.com/evcc-io/evcc/releases/tag/0.124.0",children:"Release Notes"})," an."]}),"\n",(0,t.jsxs)(n.p,{children:["Viele Gr\xfc\xdfe",(0,t.jsx)("br",{}),"\neuer evcc Core-Team"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},18174:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/batterycontrol-de-6954db79f95ac9c4e1939debabe41bef.webp"},6723:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/config-ui-f3c3d0ceada6701e4d56ebe6774e5022.webp"},30926:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/v0.124-banner-ed22d3f533af892387ab582183914039.webp"},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var t=i(96540);const r={},s=t.createContext(r);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);